<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to distanceto • distanceto</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to distanceto">
<meta property="og:description" content="distanceto">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">distanceto</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to distanceto</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to distanceto</h1>
            
      
      
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The <code>distanceto</code> package is designed to quickly sample distances from points features to other vector layers. Normally the approach for calculating distance to (something) involves generating distance surfaces using raster based approaches eg. <code><a href="https://rdrr.io/pkg/raster/man/distance.html">raster::distance</a></code> or <code>gdal_proximity</code> and subsequently point sampling these surfaces. Since raster based approaches are a costly method that frequently leads to memory issues or long and slow run times with high resolution data or large study sites, we have opted to compute these distances using vector based approaches. As a helper, there’s a decidedly low-res raster based approach for visually inspecting your region’s distance surface. But the workhorse is <code>distance_to</code>.</p>
<p>The <code>distanceto</code> package provides two functions:</p>
<ul>
<li><code>distance_to</code></li>
<li><code>distance_raster</code></li>
</ul>
</div>
<div id="example-distance_to" class="section level1">
<h1 class="hasAnchor">
<a href="#example-distance_to" class="anchor"></a>Example: <code>distance_to</code>
</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">distanceto</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
<span class="co">#&gt; Linking to GEOS 3.9.1, GDAL 3.2.3, PROJ 8.0.1</span></code></pre></div>
<div id="longlatunprojected" class="section level2">
<h2 class="hasAnchor">
<a href="#longlatunprojected" class="anchor"></a>Longlat/unprojected</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load nc data</span>
<span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"shapes/sids.shp"</span>, package<span class="op">=</span><span class="st">"spData"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Reading layer `sids' from data source </span>
<span class="co">#&gt;   `/home/alecr/R/x86_64-pc-linux-gnu-library/4.1/spData/shapes/sids.shp' </span>
<span class="co">#&gt;   using driver `ESRI Shapefile'</span>
<span class="co">#&gt; Simple feature collection with 100 features and 22 fields</span>
<span class="co">#&gt; Geometry type: MULTIPOLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965</span>
<span class="co">#&gt; CRS:           NA</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"+proj=longlat +datum=NAD27"</span>

<span class="co"># Set number of sampling points</span>
<span class="va">npts</span> <span class="op">&lt;-</span> <span class="fl">1e3</span>

<span class="co"># Sample points in nc</span>
<span class="va">ncpts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html">st_sample</a></span><span class="op">(</span><span class="va">nc</span>, <span class="va">npts</span><span class="op">)</span>

<span class="co"># Select first 5 of nc</span>
<span class="va">ncsub</span> <span class="op">&lt;-</span> <span class="va">nc</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span>

<span class="co"># Measure distance from ncpts to first 5 of nc</span>
<span class="va">dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distance_to.html">distance_to</a></span><span class="op">(</span><span class="va">ncpts</span>, <span class="va">ncsub</span>, measure <span class="op">=</span> <span class="st">'geodesic'</span><span class="op">)</span>

<span class="co"># or add to ncpts</span>
<span class="va">ncpts</span><span class="op">$</span><span class="va">dist</span> <span class="op">&lt;-</span> <span class="va">dist</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dist</span>, <span class="fl">30</span><span class="op">)</span>
<span class="co">#&gt;  [1]  21318.5958 215653.9160 158128.8304  54790.5475 138518.9832  86193.2585</span>
<span class="co">#&gt;  [7] 206515.0053  17690.9078  63991.5845  91186.5072 121431.8958 136499.8032</span>
<span class="co">#&gt; [13]    751.9639  94226.0911 182035.4673  13038.1948  97105.5950 142071.8102</span>
<span class="co">#&gt; [19]  64743.6878  98203.5928 238317.5568  69048.4712 142234.5136 171154.9588</span>
<span class="co">#&gt; [25]  72252.2242 163336.3848  18091.6617 136953.0756 163747.8498  49694.7711</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">dist</span><span class="op">)</span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div id="projected" class="section level2">
<h2 class="hasAnchor">
<a href="#projected" class="anchor"></a>Projected</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load seine data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">'seine'</span>, package <span class="op">=</span> <span class="st">'spData'</span><span class="op">)</span>

<span class="co"># Buffer seine by 1000 metres</span>
<span class="va">bufseine</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_buffer</a></span><span class="op">(</span><span class="va">seine</span>, <span class="fl">1000</span><span class="op">)</span>

<span class="co"># Set number of sampling points</span>
<span class="va">npts</span> <span class="op">&lt;-</span> <span class="fl">1e2</span>

<span class="co"># Sample points within buffer seine</span>
<span class="va">seinepts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html">st_sample</a></span><span class="op">(</span><span class="va">bufseine</span>, <span class="va">npts</span><span class="op">)</span>

<span class="co"># Measure distance from seine points to seine</span>
<span class="va">dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distance_to.html">distance_to</a></span><span class="op">(</span><span class="va">seinepts</span>, <span class="va">seine</span><span class="op">)</span>

<span class="co"># or add to seine points</span>
<span class="va">seinepts</span><span class="op">$</span><span class="va">dist</span> <span class="op">&lt;-</span> <span class="va">dist</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dist</span>, <span class="fl">30</span><span class="op">)</span>
<span class="co">#&gt;  [1]  534.1237  701.8121 1201.2315  604.4275  224.5200 1410.7405  641.1198</span>
<span class="co">#&gt;  [8] 1396.9834  835.9284  880.5694  274.4487  324.6613 2228.0730  525.9142</span>
<span class="co">#&gt; [15]  407.0903  586.8889 1822.5807 1625.5774 3293.5604  591.8837 1422.2865</span>
<span class="co">#&gt; [22]  925.9612 1189.3097  430.9867 1020.0572  298.0844 5506.7662  627.8165</span>
<span class="co">#&gt; [29] 1307.7387 1035.6657</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">dist</span><span class="op">)</span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
</div>
<div id="example-distance_raster" class="section level1">
<h1 class="hasAnchor">
<a href="#example-distance_raster" class="anchor"></a>Example: <code>distance_raster</code>
</h1>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: sp</span>

<span class="va">rdist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distance_raster.html">distance_raster</a></span><span class="op">(</span><span class="va">seine</span>, <span class="fl">1e4</span><span class="op">)</span>
<span class="co">#&gt; Warning in showSRID(uprojargs, format = "PROJ", multiline = "NO", prefer_proj</span>
<span class="co">#&gt; = prefer_proj): Discarded datum Unknown based on GRS80 ellipsoid in Proj4</span>
<span class="co">#&gt; definition</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rdist</span><span class="op">)</span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alec L. Robitaille.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
